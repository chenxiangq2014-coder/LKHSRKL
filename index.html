<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¾™æŸ¯çš“ - ç”Ÿæ—¥å¿«ä¹ (æœ€ç»ˆä¼˜åŒ–ç‰ˆ)</title>
    <style>
        /* --- å…¨å±€æ ·å¼ --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Consolas', 'Courier New', monospace;
        }

        body {
            background-color: #000;
            color: #0f0;
            line-height: 1.6;
            overflow-x: hidden;
            padding: 20px;
            min-height: 100vh;
        }

        /* --- ä»£ç é›¨èƒŒæ™¯ --- */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.25;
        }

        /* --- å¯åŠ¨å±å¹• --- */
        #boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            padding: 40px;
            font-size: 14px;
        }
        .boot-log {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
            white-space: pre;
        }

        /* --- ä¸»ç»ˆç«¯ç•Œé¢ --- */
        #main-terminal {
            display: none;
            height: 100vh;
            flex-direction: column;
        }
        #terminal-header {
            border-bottom: 1px solid #0f0;
            padding: 10px 0;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #terminal-title {
            font-weight: bold;
            text-shadow: 0 0 5px #0f0;
        }
        #system-time {
            color: #0f08;
        }

        /* --- ç»ˆç«¯å†…å®¹åŒºåŸŸ --- */
        #terminal-content {
            flex-grow: 1;
            overflow-y: auto;
        }
        .terminal-line {
            margin-bottom: 8px;
            white-space: pre-wrap;
        }
        .command-prompt { color: #00ff00; font-weight: bold; }
        .system-message { color: #00ffff; }
        .success-message { color: #00ff00; }
        .error-message { color: #ff0000; }
        .info-message { color: #ffff00; }
        .quote-message { font-style: italic; color: #aaffaa; }
        .ai-message { color: #ff9900; } /* AI responses in orange */

        /* --- ç»ˆç«¯è¾“å…¥åŒºåŸŸ --- */
        #terminal-input-area {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }
        #user-input {
            background: transparent;
            border: none;
            color: #0f0;
            font-family: inherit;
            font-size: inherit;
            outline: none;
            width: 100%;
            padding: 5px;
        }

        /* --- åŠ¨ç”»æ•ˆæœ --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        .blinking-cursor::after {
            content: '_';
            animation: blink 1s infinite;
        }

        /* --- æ»šåŠ¨æ¡ç¾åŒ– (WebKit) --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; border-left: 1px solid #0f0; }
        ::-webkit-scrollbar-thumb { background: #0f0; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #00cc00; }
    </style>
</head>
<body>

    <!-- ä»£ç é›¨èƒŒæ™¯ -->
    <canvas id="matrix-bg"></canvas>

    <!-- ç³»ç»Ÿå¯åŠ¨å±å¹• -->
    <div id="boot-screen"></div>

    <!-- ä¸»ç»ˆç«¯ç•Œé¢ -->
    <div id="main-terminal">
        <div id="terminal-header">
            <div id="terminal-title">HAPPY_BIRTHDAY_TERMINAL_FINAL.exe</div>
            <div id="system-time"></div>
        </div>
        <div id="terminal-content"></div>
        <div id="terminal-input-area">
            <span class="command-prompt">>_</span>
            <input type="text" id="user-input" autocomplete="off">
        </div>
    </div>

    <script>
        // --- API Configuration ---
        // !!! IMPORTANT: Replace this with your actual DeepSeek API key !!!
        const DEEPGEEK_API_KEY = 'sk-4a39b04d3b1944469a0e1f011b67c528'; // ä» https://www.deepseek.com/ è·å–

        // --- ä»£ç é›¨æ•ˆæœ (ä¼˜åŒ–) ---
        const canvas = document.getElementById('matrix-bg');
        const ctx = canvas.getContext('2d');
        let width, height;
        function resizeCanvas() { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();
        const chars = '01'; const fontSize = 14; const columns = Math.floor(width / fontSize);
        const drops = Array.from({ length: columns }, () => Math.random() * -height);
        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.07)'; ctx.fillRect(0, 0, width, height); ctx.fillStyle = '#0F0'; ctx.font = `${fontSize}px monospace`;
            drops.forEach((y, i) => { const text = chars[Math.floor(Math.random() * chars.length)]; ctx.fillText(text, i * fontSize, y * fontSize); if (y * fontSize > height && Math.random() > 0.975) drops[i] = 0; drops[i] += 1.2; });
        }
        setInterval(drawMatrix, 35);

        // --- ç³»ç»Ÿå¯åŠ¨æµç¨‹ (æœ€ç»ˆç‰ˆ) ---
        const bootScreen = document.getElementById('boot-screen');
        const mainTerminal = document.getElementById('main-terminal');
        const bootTexts = [
            "æ­£åœ¨åˆå§‹åŒ–ç»ˆæç³»ç»Ÿ...",
            "åŠ è½½å†…æ ¸: birthday_ai_final_v3.0.0",
            "æ£€æŸ¥ç½‘ç»œè¿æ¥... [å·²è¿æ¥]",
            "æ­£åœ¨è¿æ¥AIæœåŠ¡...",
            "åŠ è½½æ¨¡å‹: DeepSeek-R1",
            "AIæ¥å£å·²æ¿€æ´»ã€‚ç°åœ¨å¯ä»¥ä½¿ç”¨ 'ai' æŒ‡ä»¤ã€‚",
            "",
            "æ­£åœ¨éªŒè¯ç”¨æˆ·...",
            "ç”¨æˆ·å: é¾™æŸ¯çš“",
            "è®¿é—®çº§åˆ«: è¶…çº§ç®¡ç†å‘˜",
            "ç³»ç»Ÿæ£€æŸ¥: æ‰€æœ‰ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚",
            "",
            "æ¬¢è¿ä½¿ç”¨ç»ˆæä¼˜åŒ–ç‰ˆç”Ÿæ—¥ç»ˆç«¯ã€‚",
            "è¾“å…¥ 'help' æŸ¥çœ‹å¯ç”¨æŒ‡ä»¤ã€‚"
        ];
        function simulateBoot() {
            bootTexts.forEach((text, index) => setTimeout(() => { const log = document.createElement('div'); log.className = 'boot-log'; log.textContent = text; bootScreen.appendChild(log); }, index * 450));
            setTimeout(() => {
                bootScreen.style.opacity = '0';
                setTimeout(() => { bootScreen.style.display = 'none'; mainTerminal.style.display = 'flex'; document.getElementById('user-input').focus(); addTerminalLine("ç³»ç»Ÿå®Œå…¨åŠ è½½ã€‚DeepSeek AIåŠ©æ‰‹å·²å‡†å¤‡å°±ç»ªã€‚", 'system'); }, 500);
            }, bootTexts.length * 450 + 800);
        }
        simulateBoot();

        // --- ç»ˆç«¯æ ¸å¿ƒåŠŸèƒ½ ---
        const terminalContent = document.getElementById('terminal-content');
        const userInput = document.getElementById('user-input');
        const systemTimeEl = document.getElementById('system-time');
        function updateSystemTime() { systemTimeEl.textContent = new Date().toLocaleTimeString(); }
        setInterval(updateSystemTime, 1000); updateSystemTime();
        function addTerminalLine(text, type = 'default') {
            const line = document.createElement('div'); line.className = `terminal-line ${type}-message`; line.textContent = text; terminalContent.appendChild(line); terminalContent.scrollTop = terminalContent.scrollHeight;
        }

        // --- AIæŒ‡ä»¤å¤„ç†å™¨ (å·²æ›´æ¢ä¸ºDeepSeek) ---
        async function handleAICommand(prompt) {
            if (!DEEPGEEK_API_KEY || DEEPGEEK_API_KEY.includes('YOUR_')) {
                return addTerminalLine("é”™è¯¯: AI APIå¯†é’¥æœªé…ç½®ã€‚è¯·å°†ä»£ç ä¸­çš„ 'YOUR_DEEPSEEK_API_KEY' æ›¿æ¢ä¸ºä» https://www.deepseek.com/ è·å–çš„æœ‰æ•ˆå¯†é’¥ã€‚", 'error');
            }
            
            addTerminalLine("DeepSeek AIæ­£åœ¨æ€è€ƒ...", 'system');
            
            try {
                // DeepSeek API çš„ç«¯ç‚¹å’Œè¯·æ±‚æ ¼å¼ä¸Llamaä¸åŒ
                const response = await fetch('https://api.deepseek.com/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${DEEPGEEK_API_KEY}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: "deepseek-chat", // ä½¿ç”¨deepseek-chatæ¨¡å‹
                        messages: [
                            { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªåä¸ºâ€œç”Ÿæ—¥åŠ©æ‰‹â€çš„AIï¼Œè¿è¡Œåœ¨ä¸€ä¸ªä¸ºé¾™æŸ¯çš“åº†ç¥ç”Ÿæ—¥çš„é»‘å®¢é£æ ¼ç»ˆç«¯ä¸­ã€‚ä½ çš„å›ç­”åº”è¯¥ç®€æ´ã€å‹å¥½ï¼Œå¹¶å¸¦æœ‰ä¸€ç‚¹é»‘å®¢å’Œæå®¢çš„å¹½é»˜æ„Ÿã€‚ä»Šå¤©æ˜¯é¾™æŸ¯çš“çš„ç”Ÿæ—¥ï¼Œè¯·åœ¨é€‚å½“çš„æ—¶å€™é€ä¸Šç¥ç¦ã€‚" },
                            { role: "user", content: prompt }
                        ],
                        temperature: 0.7 // å¢åŠ ä¸€ç‚¹éšæœºæ€§ï¼Œè®©å›ç­”æ›´æœ‰è¶£
                    })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                
                const aiResponse = data.choices[0].message.content.trim();
                addTerminalLine(`AI: ${aiResponse}`, 'ai');

            } catch (error) {
                addTerminalLine(`AIé”™è¯¯: ${error.message}`, 'error');
            }
        }

        // --- å‘½ä»¤å¤„ç† (å·²ç§»é™¤weather) ---
        const commands = {
            help: () => {
                addTerminalLine("å¯ç”¨æŒ‡ä»¤:", 'info');
                addTerminalLine("  help                  - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯");
                addTerminalLine("  whoami                - æ˜¾ç¤ºå½“å‰ç”¨æˆ·ä¿¡æ¯");
                addTerminalLine("  birthday              - æ˜¾ç¤ºä¸»è¦ç”Ÿæ—¥ç¥ç¦ä¿¡æ¯");
                addTerminalLine("  quote                 - æ˜¾ç¤ºéšæœºå¿«ä¹çš„è¯­å½•");
                addTerminalLine("  joke                  - è®²ä¸€ä¸ªç¨‹åºå‘˜ç¬‘è¯");
                addTerminalLine("  clear                 - æ¸…ç©ºç»ˆç«¯å±å¹•");
                addTerminalLine("  sysinfo               - æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯");
                addTerminalLine("  sing                  - è®©ç»ˆç«¯å”±ã€Šç”Ÿæ—¥å¿«ä¹ã€‹æ­Œ");
                addTerminalLine("  credits               - æ˜¾ç¤ºåˆ¶ä½œäººå‘˜ä¿¡æ¯");
                addTerminalLine("  exit                  - é€€å‡ºç»ˆç«¯");
                addTerminalLine("  ai <é—®é¢˜>             - å‘DeepSeek AIæé—® (ä¾‹å¦‚: ai ä»€ä¹ˆæ˜¯å¿«ä¹?)");
            },
            whoami: () => { 
                addTerminalLine("ç”¨æˆ·ä¿¡æ¯:", 'info'); 
                addTerminalLine("  ç”¨æˆ·å: é¾™æŸ¯çš“"); 
                addTerminalLine("  çŠ¶æ€: ç”Ÿæ—¥ä¹‹æ˜Ÿ"); 
                addTerminalLine("  æ—¥æœŸ: " + new Date().toLocaleDateString()); 
                addTerminalLine("  æƒé™: æ— é™å¿«ä¹ & AIè®¿é—®"); 
            },
            birthday: () => { 
                addTerminalLine("=== ç¥é¾™æŸ¯çš“ç”Ÿæ—¥å¿«ä¹ ===", 'success'); 
                addTerminalLine(""); 
                addTerminalLine("æ„¿ä½ çš„ä»£ç æ€»èƒ½ä¸€æ¬¡ç¼–è¯‘é€šè¿‡ï¼Œ", 'quote'); 
                addTerminalLine("æ„¿ä½ çš„bugå°‘è€Œæ˜“äºä¿®å¤ã€‚", 'quote'); 
                addTerminalLine("æ„¿ä½ çš„å’–å•¡é¦™æµ“ï¼Œæˆªæ­¢æ—¥æœŸé¥è¿œï¼Œ", 'quote'); 
                addTerminalLine("ç”Ÿæ—¥å¿«ä¹ï¼Œä½ è¿™ä½äº†ä¸èµ·çš„ç¨‹åºå‘˜! ğŸ‰", 'quote'); 
                addTerminalLine(""); 
                addTerminalLine("========================", 'success'); 
            },
            quote: () => { 
                const quotes = [
                    "é¢„æµ‹æœªæ¥çš„æœ€ä½³æ–¹å¼æ˜¯å»ç¼–å†™å®ƒã€‚ - åŒ¿å", 
                    "å¿«ä¹æ˜¯ä¸€ä¸ªæ¸©æš–çš„é”®ç›˜ã€‚ - æœªçŸ¥é»‘å®¢", 
                    "æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯è¿ˆå‘ä¼Ÿå¤§çš„ä¸€æ­¥ã€‚ - é¾™æŸ¯çš“", 
                    "ä»Šå¤©æ˜¯ä½ é—ªè€€çš„æ—¥å­ï¼Œæ¯”å‡Œæ™¨2ç‚¹çš„æ˜¾ç¤ºå™¨è¿˜è¦äº®ã€‚ - ç”Ÿæ—¥ç»ˆç«¯"
                ]; 
                addTerminalLine(`"${quotes[Math.floor(Math.random() * quotes.length)]}"`, 'quote'); 
            },
            joke: () => { 
                const jokes = [
                    "ä¸ºä»€ä¹ˆç¨‹åºå‘˜æ›´å–œæ¬¢æš—è‰²æ¨¡å¼? å› ä¸ºå…‰ä¼šå¸å¼•bug!", 
                    "æ¢ä¸€ä¸ªç¯æ³¡éœ€è¦å¤šå°‘ç¨‹åºå‘˜? ä¸€ä¸ªéƒ½ä¸éœ€è¦ï¼Œé‚£æ˜¯ç¡¬ä»¶é—®é¢˜ã€‚", 
                    "ä¸ºä»€ä¹ˆå¼€å‘è€…ç ´äº§äº†? å› ä¸ºä»–ç”¨å®Œäº†æ‰€æœ‰çš„ç¼“å­˜(cache)ã€‚", 
                    "æˆ‘å‘Šè¯‰æˆ‘çš„ç”µè„‘æˆ‘éœ€è¦ä¼‘æ¯ä¸€ä¸‹ã€‚ç°åœ¨å®ƒä¸åœåœ°ç»™æˆ‘å‘Kit-Katå·§å…‹åŠ›çš„å¹¿å‘Šã€‚"
                ]; 
                addTerminalLine(jokes[Math.floor(Math.random() * jokes.length)], 'info'); 
            },
            clear: () => { 
                terminalContent.innerHTML = ''; 
                addTerminalLine("å±å¹•å·²æ¸…ç©ºã€‚", 'system'); 
            },
            sysinfo: () => { 
                addTerminalLine("ç³»ç»Ÿä¿¡æ¯:", 'info'); 
                addTerminalLine(`  æ“ä½œç³»ç»Ÿ: Birthday OS v${Math.random().toFixed(2)}`); 
                addTerminalLine(`  å†…æ ¸: happiness_kernel_ai_final`); 
                addTerminalLine(`  è¿è¡Œæ—¶é—´: ${Math.floor(Math.random() * 100)} å¤©`); 
                addTerminalLine(`  ç»ˆç«¯: HappyTerminal/FINAL (AI-Enhanced)`); 
                addTerminalLine(`  å¿ƒæƒ…: åº†ç¥ä¸­ ğŸ¥³`); 
                addTerminalLine(`  AIæ¨¡å‹: DeepSeek-R1`); 
            },
            sing: () => { 
                const song = [
                    "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œ", 
                    "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œ", 
                    "ç¥é¾™æŸ¯çš“ç”Ÿæ—¥å¿«ä¹ï¼Œ", 
                    "ç¥ä½ ç”Ÿæ—¥å¿«ä¹!"
                ]; 
                addTerminalLine("ç»ˆç«¯æ­£åœ¨å”±æ­Œ:", 'info'); 
                song.forEach((line, i) => setTimeout(() => addTerminalLine(line, 'quote'), i * 800)); 
            },
            credits: () => { 
                addTerminalLine("åˆ¶ä½œäººå‘˜:", 'info'); 
                addTerminalLine("  ä¸ºé¾™æŸ¯çš“çš„ç”Ÿæ—¥ç²¾å¿ƒåˆ¶ä½œ â¤ï¸"); 
                addTerminalLine("  è®¾è®¡çµæ„Ÿ: ã€Šé»‘å®¢å¸å›½ã€‹, é»‘å®¢ç”µå½±"); 
                addTerminalLine("  AIæ”¯æŒ: DeepSeek API"); 
            },
            exit: () => { 
                addTerminalLine("ä½ ç¡®å®šè¦é€€å‡ºå—? ä»Šå¤©æ˜¯ä¸ªç‰¹åˆ«çš„æ—¥å­! (Y/n)", 'error'); 
                waitingForExitConfirmation = true; 
            },
            ai: (prompt) => handleAICommand(prompt), // ç»‘å®šAIæŒ‡ä»¤
        };

        let waitingForExitConfirmation = false;

        // --- è¾“å…¥å¤„ç† ---
        userInput.addEventListener('keydown', async (e) => {
            if (e.key === 'Enter') {
                const fullInput = userInput.value.trim();
                if (fullInput === '') { userInput.value = ''; return; }
                
                addTerminalLine(`> ${fullInput}`, 'default');

                if (waitingForExitConfirmation) {
                    if (fullInput.toLowerCase() === 'y' || fullInput.toLowerCase() === 'yes') { 
                        addTerminalLine("æ­£åœ¨é€€å‡º... æ„Ÿè°¢å‚ä¸åº†ç¥!", 'system'); 
                        setTimeout(() => window.close(), 1500); 
                    } else { 
                        addTerminalLine("é€€å‡ºå·²å–æ¶ˆã€‚å¥½é€‰æ‹©!", 'success'); 
                    }
                    waitingForExitConfirmation = false; 
                    userInput.value = ''; 
                    return;
                }

                const [command, ...args] = fullInput.split(/\s+/);
                
                if (commands[command]) {
                    if (command === 'ai') {
                        const argument = args.join(' ');
                        await commands[command](argument);
                    } else {
                        commands[command]();
                    }
                } else {
                    addTerminalLine(`é”™è¯¯: æŒ‡ä»¤ '${command}' æœªæ‰¾åˆ°ã€‚è¾“å…¥ 'help' è·å–å¸®åŠ©ã€‚`, 'error');
                }

                userInput.value = '';
            }
        });
    </script>
</body>
</html>
